---
name: tic-tac-toe
start:
- X X X X X X X X X X;
  X P _ _ _ _ _ _ _ X;
  X _ _ _ _ _ _ _ _ X;
  X _ _ _ _ _ _ X L X;
  X _ _ _ _ _ _ X _ X;
  X _ _ _ K _ _ X O X;
  X X X X X X X X X X;
tree:
  type: loop-until-all
  children:
  - type: player
    pid: 1
    children:
    - type: x-replace
      what: P
      with:
      - PK
      children:
      - type: rewrite
        comment: player stays still
        lhs: P
        rhs: P
      - type: x-rotate
        comment: player moves
        children:
        - type: rewrite
          lhs: P _
          rhs: _ P
        - type: rewrite
          lhs: P O
          rhs: _ W
    - type: x-rotate
      comment: player, key, lock
      children:
      - type: rewrite
        lhs: P K
        rhs: _ PK
      - type: rewrite
        lhs: PK L
        rhs: _  P
  - type: win
    pid: 1
    children:
    - type: match
      pattern: W
  - type: lose
    pid: 1
    children:
    - type: none
      children:
      - type: x-replace
        what: P
        with:
        - PK
        children:
        - type: match
          pattern: P
