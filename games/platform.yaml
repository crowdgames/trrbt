---
name: platformer
start:
  - _  _  _  _  _  _  _  _  _ ;
    _  _  _  _  _  _  _  _  _ ;
    _  _  _  _  _  _  Q  _  _ ;
    _  _  _  _  _  _  _  _  _ ;
    _  _  _  _  E  _  _  _  _ ;
    P0 _  _  _  X  X  X  _  O ;
    X  X  X  X  X  X  X  X  X ;
tree:
  type: replaceonly
  what: a
  with:
  - 0
  - 1
  - 2
  children:
  - type: sequence
    children:
    - type: player
      number: 1
      children:
      - type: rewrite
        lhs: Pa
        rhs: Pa
      - type: mirror
        children:
        - type: rewrite
          lhs: Pa _
          rhs: _  Pa
        - type: rewrite
          lhs: Pa O
          rhs: _  W
      - type: rewrite
        lhs: P0;X
        rhs: P2;X
    - type: all
      children:
      - type: rewrite
        lhs: _  E
        rhs: E  _
      - type: rewrite
        lhs: Pa E
        rhs: E  _
    - type: all
      children:
      - type: rewrite
        lhs: E ; _
        rhs: _ ; E
      - type: rewrite
        lhs: E ; Pa; X
        rhs: _ ; E ; X
      - type: rewrite
        lhs: E ; P0; _
        rhs: _ ; E ; P0
      - type: rewrite
        lhs: P0; _
        rhs: _ ; P0
      - type: rewrite
        lhs: P0; O
        rhs: _ ; W
      - type: rewrite
        lhs: P0; E ; X
        rhs: _ ; P0; X
      - type: rewrite
        lhs: P0; E ; _
        rhs: _ ; P0; E
      - type: rewrite
        lhs: P0;X
        rhs: P0;X
      - type: rewrite
        lhs: _ ;P1
        rhs: P0;_
      - type: rewrite
        lhs: X ;P1
        rhs: X ;P0
      - type: rewrite
        lhs: Q ;P1
        rhs: X ;P0
      - type: rewrite
        lhs: _ ;P2
        rhs: P1;_
      - type: rewrite
        lhs: X ;P1
        rhs: X ;P0
      - type: rewrite
        lhs: Q ;P1
        rhs: X ;P0
    - type: win
      number: 1
      children:
      - type: match
        pattern: W
    - type: lose
      number: 1
      children:
      - type: none
        children:
        - type: match
          pattern: Pa
