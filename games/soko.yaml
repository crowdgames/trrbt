---
name: soko
tree:
  type: order
  children:
  - type: set-board
    pattern:
      main: X _ _ _;
            _ P @ _;
            _ _ _ _;
            X _ @ _;
      targ: _ _ _ _;
            _ _ _ _;
            _ _ O _;
            _ _ O _;
  - type: loop-until-all
    nid: gameloop
    children:
    - type: player
      pid: X
      children:
      - type: x-spin
        children:
        - type: rewrite
          lhs: P _
          rhs: _ P
        - type: rewrite
          lhs: P @ _
          rhs: _ P @
    - type: win
      pid: 1
      children:
      - type: none
        children:
        - type: match
          pattern:
            main: '@'
            targ: _
