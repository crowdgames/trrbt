---
name: checkers
start:
- =   =   =   =   =   =   =   =  ;
  _   BPS _   BPS _   BPS _   BPS;
  BPS _   BPS _   BPS _   BPS _  ;
  _   BPS _   BPS _   BPS _   BPS;
  _   _   _   _   _   _   _   _  ;
  _   _   _   _   _   _   _   _  ;
  RPS _   RPS _   RPS _   RPS _  ;
  _   RPS _   RPS _   RPS _   RPS;
  RPS _   RPS _   RPS _   RPS _  ;
  =   =   =   =   =   =   =   =  ;
tree:
  type: mirror
  children:
  - type: replaceonly
    what: a
    with:
    - K
    - P
    children:
    - type: replaceonly
      what: b
      with:
      - K
      - P
      children:
      - type: loop-until-all
        children:
        - type: ident
          id: redturn
          children:
          - type: player
            number: 1
            children:
            - type: rewrite
              lhs: .    _  ;
                   RaS  .  ;
              rhs: .    RaS;
                   _   .   ;
            - type: rewrite
              lhs: RKS .  ;
                   .   _  ;
              rhs: _   .  ;
                   .    RKS;
            - type: rewrite
              lhs: .   .   _  ;
                   .   BbS .  ;
                   RaS .   .  ;
              rhs: .   .   RaJ;
                   .   _   .  ;
                   _   .   .  ;
            - type: rewrite
              lhs: RKS .   .  ;
                   .   BbS .  ;
                   .   .   _  ;
              rhs: _   .   .  ;
                   .   _   .  ;
                   .   .   RKJ;
          - type: loop-until-all
            children:
            - type: player
              number: 1
              children:
              - type: rewrite
                lhs: .   .   _  ;
                     .   BbS .  ;
                     RaJ .   .  ;
                rhs: .   .   RaJ;
                     .   _   .  ;
                     _   .   .  ;
              - type: rewrite
                lhs: RKJ  .  .  ;
                     .   BbS .  ;
                     .   .   _  ;
                rhs: _   .   .  ;
                     .   _   .  ;
                     .   .   RKJ;
          - type: rewrite
            lhs: RaJ
            rhs: RaS
          - type: rewrite
            lhs: =  ; RPS
            rhs: =  ; RKS
          - type: win
            number: 1
            children:
             - type: none
               children:
               - type: match
                 pattern: BaS
        - type: nextplayer
          children:
          - type: fliponly
            children:
            - type: swaponly
              what: R
              with: B
              children:
              - type: link
                target: redturn
