---
name: checkers
start:
- =   =   =   =   =   =   =   =  ;
  _   BPS _   BPS _   BPS _   BPS;
  BPS _   BPS _   BPS _   BPS _  ;
  _   BPS _   BPS _   BPS _   BPS;
  _   _   _   _   _   _   _   _  ;
  _   _   _   _   _   _   _   _  ;
  RPS _   RPS _   RPS _   RPS _  ;
  _   RPS _   RPS _   RPS _   RPS;
  RPS _   RPS _   RPS _   RPS _  ;
  =   =   =   =   =   =   =   =  ;
tree:
  type: x-mirror
  children:
  - type: x-replaceonly
    what: a
    with:
    - K
    - P
    children:
    - type: x-replaceonly
      what: b
      with:
      - K
      - P
      children:
      - type: loop-until-all
        children:
        - type: x-ident
          nid: redturn
          children:
          - type: none
            comment: player loses if no move
            children:
            - type: lose
              pid: X
              children:
              - type: none
                children:
                - type: player
                  pid: R
                  children:
                  - type: rewrite
                    lhs: .    _  ;
                         RaS  .  ;
                    rhs: .    RaS;
                         _   .   ;
                  - type: rewrite
                    lhs: RKS .  ;
                         .   _  ;
                    rhs: _   .  ;
                         .    RKS;
                  - type: rewrite
                    lhs: .   .   _  ;
                         .   BbS .  ;
                         RaS .   .  ;
                    rhs: .   .   RaJ;
                         .   _   .  ;
                         _   .   .  ;
                  - type: rewrite
                    lhs: RKS .   .  ;
                         .   BbS .  ;
                         .   .   _  ;
                    rhs: _   .   .  ;
                         .   _   .  ;
                         .   .   RKJ;
          - type: loop-until-all
            children:
            - type: player
              pid: R
              children:
              - type: rewrite
                lhs: .   .   _  ;
                     .   BbS .  ;
                     RaJ .   .  ;
                rhs: .   .   RaJ;
                     .   _   .  ;
                     _   .   .  ;
              - type: rewrite
                lhs: RKJ  .  .  ;
                     .   BbS .  ;
                     .   .   _  ;
                rhs: _   .   .  ;
                     .   _   .  ;
                     .   .   RKJ;
          - type: rewrite
            lhs: RaJ
            rhs: RaS
          - type: rewrite
            lhs: =  ; RPS
            rhs: =  ; RKS
          - type: win
            pid: R
            children:
             - type: none
               children:
               - type: match
                 pattern: BaS
        - type: x-newplayer
          pid: B
          children:
          - type: x-fliponly
            children:
            - type: x-swaponly
              what: R
              with: B
              children:
              - type: x-link
                target: redturn
