---
name: rush hour
start:
- XX XX XX XX XX XX XX XX;
  XX __ __ __ __ T1 __ XX;
  XX __ __ __ __ T1 __ XX;
  XX CR CR __ __ T1 __ OO;
  XX __ __ __ __ __ __ XX;
  XX __ __ __ __ __ __ XX;
  XX __ __ __ __ __ __ XX;
  XX XX XX XX XX XX XX XX;
- XX XX XX XX XX XX XX XX;
  XX __ __ __ __ T1 __ XX;
  XX __ __ __ __ T1 __ XX;
  XX CR CR __ __ T1 __ OO;
  XX __ __ __ __ C1 C1 XX;
  XX __ __ __ T2 T2 T2 XX;
  XX __ __ __ __ __ __ XX;
  XX XX XX XX XX XX XX XX;
tree:
  type: loop-until-all
  children:
  - type: player
    number: 1
    children:
    - type: ident
      id: move
      children:
      - type: mirror
        comment: red car moves side to side
        children:
        - type: rewrite
          lhs: CR CR __
          rhs: __ CR CR
      - type: replaceonly
        comment: cars and trucks move
        what: a
        with:
        - 1
        - 2
        children:
        - type: rotate
          children:
          - type: rewrite
            lhs: Ca Ca __
            rhs: __ Ca Ca
          - type: rewrite
            lhs: Ta Ta Ta __
            rhs: __ Ta Ta Ta
  - type: win
    comment: win if red car at exit
    number: 1
    children:
    - type: match
      pattern: CR CR OO
