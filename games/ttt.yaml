---
name: tic-tac-toe
start:
- _ _ _;
  _ _ _;
  _ _ _;
tree:
  type: loop-until-all
  children:
  - type: x-ident
    nid: xturn
    children:
    - type: player
      comment: player moves
      number: 1
      children:
      - type: rewrite
        lhs: _
        rhs: X
    - type: win
      comment: check for player win
      number: 1
      children:
      - type: x-turn
        children:
        - type: x-skew
          children:
          - type: match
            pattern: X X X
    - type: draw
      comment: check for draw
      children:
      - type: none
        children:
        - type: match
          pattern: _
  - type: x-nextplayer
    children:
    - type: x-swaponly
      what: X
      with: O
      children:
      - type: x-link
        target: xturn
