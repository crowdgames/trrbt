---
name: rush hour-randomize
start:
- XX XX XX XX XX XX XX XX;
  XX __ __ __ __ __ __ XX;
  XX __ __ __ __ __ __ XX;
  XX __ __ __ __ CR CR OO;
  XX __ __ __ __ __ __ XX;
  XX __ __ __ __ __ __ XX;
  XX __ __ __ __ __ __ XX;
  XX XX XX XX XX XX XX XX;
tree:
  type: sequence
  children:
  - type: sequence
    comment: place cars and trucks randomly
    children:
    - type: rewrite
      lhs: __; __
      rhs: C1; C1
    - type: rewrite
      lhs: __; __; __
      rhs: T1; T1; T1
    - type: rewrite
      lhs: __ __
      rhs: C2 C2
    - type: rewrite
      lhs: __ __ __
      rhs: T2 T2 T2
  - type: loop-times
    comment: shuffle cars and trucks
    times: 25
    children:
    - type: sequence
      children:
      - type: rewrite
        lhs: __ CR CR
        rhs: CR CR __
      - type: random-try
        children:
        - type: x-link
          target: move
  - type: x-file
    target: rushhour
